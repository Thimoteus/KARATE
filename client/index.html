<head>
        <title>KARATE</title>
</head>

<body>
        <div id="wrapper" class="container-fluid">
                {{> hello}}
        </div>
</body>

<template name="hello">
        {{#if currentUser}}
                {{> splash}}
        {{else}} {{#if loggingIn}}
                <h1>Welcome to KARmic Attorney Tool Engine!</h1>
                <p>Please wait while we log you in ...</p>
        {{else}}
                <h1>Welcome to KARmic Attorney Tool Engine!</h1>
                <p>Please log-in to reddit below:</p>
                {{> loginButtons}}
        {{/if}}{{/if}}
</template>

<template name="splash">
        <div class="row" role="tabpanel">
                {{> channels}}
                {{> screen}}
        </div>
</template>

<template name="channels">
        <nav id="nav" class="col-md-3">
                <ul class="nav nav-pills nav-stacked" role="tablist">
                        <li role="presentation" class="active">
                                <a href="#summary" role="tab" data-toggle="pill">
                                        <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
                                        Summary
                                </a>
                        </li>
                        <li role="presentation">
                                <a href="#add-new-case" role="tab" data-toggle="pill">
                                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                                        Add a new case
                                </a>
                        </li>
                        <li role="presentation">
                                <a href="#tools" role="tab" data-toggle="pill">
                                        <span class="glyphicon glyphicon-wrench"></span>
                                        Tools
                                </a>
                        </li>
                        <li role="presentation">
                                <a href="#settings" role="tab" data-toggle="pill">
                                        <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
                                        Settings
                                </a>
                        </li>
                        <li role="presentation">
                                <a href="#about" role="tab" data-toggle="pill">
                                        <span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
                                        About
                                </a>
                        </li>
                        <li class="nav-divider"></li>
                        {{> loginButtons}}
                        <!-- <li class="nav-divider"></li>
                        {{> magicButton}} -->
                        <li class="nav-divider"></li>
                        {{> statusUpdates}}
                </ul>
        </nav>
</template>

<template name="screen">
        <div id="screen" class="col-md-9">
                <div class="tab-content">
                        <div id="summary" role="tabpanel" class="tab-pane active">{{> summary}}</div>
                        <div id="add-new-case" role="tabpanel" class="tab-pane">{{> addNewCase}}</div>
                        <div id="tools" role="tabpanel" class="tab-pane">{{> tools}}</div>
                        <div id="settings" role="tabpanel" class="tab-pane">{{> settings}}</div>
                        <div id="about" role="tabpanel" class="tab-pane">{{> about}}</div>
                </div>
        </div>
</template>

<template name="summary">
        <div class="page-header">
                <h2>Summary <small><a href="#statistics">Statistics</a> | <a href="#current-cases">Current Cases</a> | <a href="#old-cases">Old Cases</a></small></h2>
        </div>
        {{> statistics}}
        {{> currentCases}}
        {{> oldCases}}
</template>

<template name="statistics">
        <h3 id="statistics">Statistics</h3>
                <p><strong>Total cases:</strong> {{totalCases}}, with {{incompleted}} in session or pre-trial</p>
                <p><strong class="wins-tooltip">Wins:</strong> {{wins}}</p>
                <p><strong>Losses:</strong> {{losses}}</p>
                <p><strong class="ncp-tooltip">Non-completion probability:</strong> {{NCP}}</p>
</template>

<template name="currentCases">
        <h3 id="current-cases">Current cases</h3>
        {{#each cases}}
                <div class="panel panel-default">
                        <div class="panel-heading">
                                <h3 class="panel-title">
                                        <span class="glyphicon glyphicon-link"></span>
                                        <a href="{{shortLink}}" target="_blank">{{title}}</a>
                                </h3>
                        </div>
                        <div class="panel-body">
                                <form role="form" class="form-horizontal">
                                        <fieldset {{disabled}}>
                                                <div class="form-group">
                                                        <label for="role-{{_id}}" class="control-label col-xs-1">Role:</label>
                                                        <div class="col-xs-3">
                                                                <select id="role-{{_id}}" class="form-control">
                                                                        {{#each roleOptions}}
                                                                                <option value="{{value}}" {{selected}}>{{value}}</option>
                                                                        {{/each}}
                                                                </select>
                                                        </div>
                                                </div>
                                                <div class="form-group">
                                                        <label for="status-{{_id}}" class="control-label col-xs-1">Status:</label>
                                                        <div class="col-xs-3">
                                                                <select id="status-{{_id}}" class="form-control">
                                                                        {{#each statusOptions}}
                                                                                <option value="{{value}}" {{selected}}>{{value}}</option>
                                                                        {{/each}}
                                                                </select>
                                                        </div>
                                                </div>
                                        </fieldset>
                                </form>
                                <button class="btn btn-danger remove-case" type="button">
                                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                        Remove case
                                </button>
                                <button class="btn btn-info edit-case" type="button">
                                        <span class="glyphicon glyphicon-pencil"></span>
                                        {{editText}}
                                </button>
                                {{> updateOnReddit}}
                        </div>
                </div>
        {{/each}}
</template>

<template name="oldCases">
        <h3 id="old-cases">Old Cases</h3>
        {{#each cases}}
                <div class="panel panel-default">
                        <div class="panel-heading">
                                <h3 class="panel-title">
                                        <span class="glyphicon glyphicon-link"></span>
                                        <a href="{{shortLink}}" target="_blank">{{title}}</a>
                                </h3>
                        </div>
                        <div class="panel-body">
                                <p>
                                        <strong>Role:</strong> {{role}}
                                </p>
                                <p>
                                        <strong>Result:</strong> {{status}}
                                </p>
                                <button class="btn btn-danger remove-case" type="button">
                                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                        Remove case
                                </button>
                                {{> updateOnReddit}}
                        </div>
                </div>
        {{/each}}
</template>

<template name="addNewCase">
        <form role="form" class="form-horizontal">
                <div class="form-group">
                        <label for="case-link" class="control-label col-xs-2">Case link</label>
                        <div class="col-xs-10">
                                <input type="text" class="form-control" id="case-link">
                        </div>
                </div>
                <div class="form-group">
                        <label class="control-label col-xs-2">Role</label>
                        <div class="col-xs-10">
                                {{#each roles}}
                                        <div class="radio">
                                                <label>
                                                        <input type="radio" name="roles" id="roles-{{role}}" value="{{role}}"> {{role}}
                                                </label>
                                        </div>
                                {{/each}}
                        </div>
                </div>
                <div class="form-group">
                        <label class="control-label col-xs-2">Status</label>
                        <div class="col-xs-10">
                                {{#each statuses}}
                                        <div class="radio">
                                                <label>
                                                        <input type="radio" name="statuses" id="status-{{status}}" value="{{status}}"> {{statusEdited}}
                                                </label>
                                        </div>
                                {{/each}}
                        </div>
                </div>
                <button class="btn btn-default" type="submit">Submit</button>
                <button class="post-to-firm btn-post-to-firm btn btn-info hidden">Post link to firm</button>
                <button class="post-to-firm-cancel btn-post-to-firm btn btn-danger hidden">Cancel</button>
        </form>
</template>

<template name="tools">
        <form role="form" class="form-horizontal" id="tools-username">
                <legend>User search</legend>
                <fieldset>
                        <div class="form-group">
                                <label class="control-label col-xs-2">Search</label>
                                <div class="col-xs-6">
                                        <div class="radio">
                                                <label>
                                                        <input type="radio" name="search-username" value="redective" checked> redective
                                                </label>
                                        </div>
                                        <div class="radio">
                                                <label>
                                                        <input type="radio" name="search-username" value="rcs"> redditcommentsearch
                                                </label>
                                        </div>
                                        <div class="radio">
                                                <label>
                                                        <input type="radio" name="search-username" value="metareddit"> metareddit
                                                </label>
                                        </div>
                                        <div class="radio">
                                                <label>
                                                        <input type="radio" name="search-username" value="reddit"> reddit
                                                </label>
                                        </div>
                                </div>
                        </div>
                        <div class="form-group">
                                <label for="search-username" class="control-label col-xs-2">for</label>
                                <div class="col-xs-6">
                                        <div class="input-group">
                                                <input type="text" class="form-control" id="search-username" placeholder="username">
                                                <div class="input-group-btn">
                                                        <button class="btn btn-default" type="submit">Search</button>
                                                </div>
                                        </div>
                                </div>
                        </div>
                </fieldset>
        </form>
        <form role="form" class="form-horizontal" id="tools-image">
                <legend>Reverse image search</legend>
                <fieldset>
                        <div class="form-group">
                                <label class="control-label col-xs-2">Search</label>
                                <div class="col-xs-6">
                                        <div class="radio">
                                                <label>
                                                        <input type="radio" name="search-image" value="karmadecay" checked> karma decay
                                                </label>
                                        </div>
                                        <div class="radio">
                                                <label>
                                                        <input type="radio" name="search-image" value="tineye"> tineye
                                                </label>
                                        </div>
                                        <div class="radio">
                                                <label>
                                                        <input type="radio" name="search-image" value="google"> google
                                                </label>
                                        </div>
                                </div>
                        </div>
                        <div class="form-group">
                                <label class="control-label col-xs-2" for="search-image">for</label>
                                <div class="col-xs-6">
                                        <div class="input-group">
                                                <input type="text" class="form-control" id="search-image" placeholder="image url">
                                                <div class="input-group-btn">
                                                        <button class="btn btn-default" type="submit">Search</button>
                                                </div>
                                        </div>
                                </div>
                        </div>
                </fieldset>
        </form>
</template>

<template name="settings">
        <form role="form" class="form-horizontal">
                <fieldset>
                        <div class="form-group">
                                <label for="firm" class="control-label col-xs-2">Firm</label>
                                <div class="col-xs-6">
                                        <input type="text" class="form-control" id="firm" aria-describedby="firm-help" value="{{firm}}">
                                        <span id="firm-help" class="help-block">Post your firm's subreddit name, e.g. "BiasedLawPLLC"</span>
                                </div>
                        </div>
                        <div class="form-group">
                                <label class="control-label col-xs-2">Update method</label>
                                <div class="col-xs-10">
                                        {{#each updateMethods}}
                                                <div class="radio">
                                                        <label>
                                                                <input type="radio" name="update-methods" value="{{value}}" {{checked}}>
                                                                {{value}} {{description}}
                                                        </label>
                                                </div>
                                        {{/each}}
                                </div>
                        </div>
                        <div class="form-group">
                                <label for="recipient" class="control-label col-xs-2">Recipient</label>
                                <div class="col-xs-6">
                                        <input type="text" class="form-control" id="recipient" aria-describedby="recipient-help" value="{{recipient}}" {{recipientDisabled}}>
                                        <span id="recipient-help" class="help-block">If you chose <code>PM</code> above, this should be a username. If you chose <code>Reply</code> then it should be a post's URL.</span>
                                </div>
                        </div>
                        <button class="btn btn-default" type="submit">Save</button>
                </fieldset>
        </form>
</template>

<template name="about">
        <p>The <strong>Kar</strong>ma <strong>A</strong>ttorney <strong>T</strong>ool <strong>E</strong>ngine is a tool developed by <a href="https://www.reddit.com/user/Thimoteus" target="_blank">/u/Thimoteus</a> to help <a href="https://www.reddit.com/r/KarmaCourt" target="_blank">KarmaCourt</a> attorneys keep track of their cases.</p>
        <h4>Credits</h4>
        <p>Built on and hosted by <a href="http://www.meteor.com">Meteor</a></p>
        <p>Icons by <a href="http://glyphicons.com/">glyphicons</a></p>
</template>

<template name="statusUpdates">
        <div id="statusUpdates">
        </div>
</template>

<template name="updateOnReddit">
        {{#if canUpdateCaseOnReddit}}
        <button class="btn btn-info update-case">
                <span class="glyphicon glyphicon-envelope"></span>
                Update on reddit
        </button>
        {{/if}}
</template>

<template name="magicButton">
        <div>
                <input type="text" id="magicText">
                <button id="magicButton" class="btn btn-danger">Magic button</button>
        </div>
</template>